/* Import Font */
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

body {
    background-color: #0f380f; /* Verde Game Boy */
    font-family: 'Press Start 2P', cursive; /* MODIFICATO: Usare cursive come fallback generico */
    color: white;
    margin: 0;
    padding: 20px;
    box-sizing: border-box;
    display: flex; /* USA FLEXBOX */
    flex-direction: column; /* IMPILA I FIGLI VERTICALMENTE */
    align-items: center; /* CENTRA I FIGLI ORIZZONTALMENTE */
    min-height: calc(100vh - 40px); /* Altezza minima per riempire la viewport meno il padding */
}

.retro-container { /* Classe usata da #startScreen */
    width: 90%;
    max-width: 600px; /* Limita la larghezza su schermi grandi */
    background-color: #000000; /* Finestra nera */
    border: 4px solid #ffffff; /* Bordo iniziale */
    padding: 30px;
    box-shadow: 0 0 10px #a8ff60, 0 0 20px #a8ff60; /* Effetto glow */
    position: relative;
    /* margin: 20px auto; Rimosso auto orizzontale, la centratura è gestita da flex su body */
    margin-top: 0; /* Il messaggio personale ha già un margin-bottom */
    margin-bottom: 20px; /* Margine inferiore per .retro-container */
}

/* Bordo animato - MODIFICATO */
.retro-border {
    background-color: transparent; /* MODIFICATO: Rimuove sfondo verde interno */
    padding: 0; /* RIMOSSO/AZZERATO: Padding interno non più necessario visivamente */
    position: relative;
}

/* RIMOSSI Keyframes animazione */
/*
@keyframes blink-border {
    50% {
        border-color: #00ffcc;
    }
}
*/

.retro-content {
    background-color: transparent; /* MODIFICATO: Rimuove sfondo verde contenuto */
    padding: 0; /* RIMOSSO/AZZERATO: Padding gestito da .retro-container */
    color: #fff;
    text-align: center;
}

.text-area {
    font-size: 14px; /* Corpo testo */
    line-height: 1.6;
    text-align: center;
    border-bottom: 2px solid #ffffff; /* Separatore */
    padding-bottom: 15px;
}

.text-area p {
    margin: 0;
}

#startScreen .text-area {
    margin-bottom: 0; /* Rimuovo margine inferiore se uso margin-top su .menu */
    border-bottom: 1px dashed #a8ff60; /* Linea bianca sotto il testo */
    padding-bottom: 20px; /* Spazio tra testo e linea */
}

/* Menu Styles */
.menu {
    display: flex;
    flex-direction: column; /* Buttons stacked vertically */
    gap: 10px; /* Space between buttons */
    align-items: center; /* Center buttons horizontally */
    width: 100%; /* Ensure it takes width for centering */
    margin-top: 20px; /* AGGIUNTO: Spazio sopra i pulsanti, sotto la linea */
}

.menu {
    display: flex;
    flex-direction: column; /* Pulsanti in colonna su desktop */
    align-items: center;
    gap: 15px; /* Spazio tra i pulsanti */
}

.retro-button {
    font-family: 'Press Start 2P', sans-serif;
    font-size: 16px; /* Dimensione testo pulsanti */
    padding: 10px 20px;
    background-color: #0f380f; /* Sfondo verde */
    color: #ffffff; /* Testo bianco */
    border: 2px solid #ffffff; /* Bordo bianco */
    cursor: pointer;
    text-transform: uppercase;
    transition: background-color 0.2s, color 0.2s, box-shadow 0.2s;
    box-shadow: 3px 3px 0px #a8ff60; /* Ombra stile pixel */
}

.retro-button:hover,
.retro-button:focus {
    background-color: #a8ff60; /* Evidenziazione al passaggio */
    color: #000000; /* Testo nero */
    box-shadow: 3px 3px 0px #ffffff;
    outline: none;
}

.retro-button:active {
    background-color: #00ffcc;
    box-shadow: 1px 1px 0px #ffffff;
    transform: translate(2px, 2px); /* Effetto pressione */
}

/* Commentata per uniformare allo stile base .close-button */
/*
.retro-button.close-button {
    position: absolute;
    top: 8px; 
    right: 8px; 
    padding: 2px 6px; 
    font-size: 14px; 
    min-width: auto;
    line-height: 1;
    border: 1px solid #a8ff60;
    background-color: #0f380f;
    color: #a8ff60;
    z-index: 10; 
    cursor: pointer; 
}
.retro-button.close-button:hover {
    background-color: #a8ff60;
    color: #0f380f;
}
*/

/* Responsive */
@media (max-width: 768px) {
    .retro-container {
        width: 100%;
        margin-top: 20px; /* Spazio dall'alto su mobile */
    }

    .menu {
        flex-direction: row; /* Pulsanti in riga su mobile */
        overflow-x: auto; /* Scroll orizzontale */
        justify-content: flex-start; /* Allinea a sinistra */
        padding-bottom: 10px; /* Spazio per lo scroll */
        scrollbar-width: thin; /* Stile scrollbar */
        scrollbar-color: #a8ff60 #0f380f;
    }

    .menu::-webkit-scrollbar {
        height: 8px;
    }

    .menu::-webkit-scrollbar-track {
        background: #0f380f;
    }

    .menu::-webkit-scrollbar-thumb {
        background-color: #a8ff60;
        border-radius: 4px;
        border: 1px solid #0f380f;
    }

    .retro-button {
        flex-shrink: 0; /* Impedisce ai pulsanti di restringersi */
        font-size: 14px; /* Riduci dimensione font su mobile */
        padding: 8px 15px;
    }

    .text-area {
        font-size: 12px; /* Riduci dimensione font testo su mobile */
    }
}

/* Animazione pulsante per Shopping List */
@keyframes pulseEffect {
    0% {
        transform: scale(1);
        box-shadow: 3px 3px 0px #a8ff60; /* Ombra base del .retro-button */
    }
    50% {
        transform: scale(1.05); /* Leggero ingrandimento */
        box-shadow: 4px 4px 0px #beff80; /* Ombra leggermente più grande e chiara */
    }
    100% {
        transform: scale(1);
        box-shadow: 3px 3px 0px #a8ff60; /* Ritorna all'ombra base */
    }
}

#shopping-list-btn {
    animation-name: pulseEffect;
    animation-duration: 1.5s; /* Durata dell'animazione */
    animation-timing-function: ease-in-out; /* Andamento morbido */
    animation-iteration-count: infinite; /* Ripeti all'infinito */
}

/* Stili aggiuntivi per titoli/sottotitoli se necessario */
h1 { /* Esempio titolo */
    font-size: 24px;
    color: #ffffff;
    text-align: center;
    margin-bottom: 10px;
}

h2 { /* Esempio sottotitolo */
    font-size: 18px;
    color: #a8ff60;
    text-align: center;
    margin-bottom: 20px;
}

/* Stili per la Shopping List Modal */

.modal-overlay {
    position: fixed; /* Fisso rispetto alla viewport */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8); /* Sfondo semi-trasparente più scuro */
    display: none; /* Nascosto di default */
    justify-content: center;
    align-items: center;
    z-index: 1000; /* Sopra gli altri contenuti */
    padding: 15px; /* Padding per distanziare dai bordi schermo */
    box-sizing: border-box;
    /* Opzionale: transizione per l'apparizione */
    /* opacity: 0;
    transition: opacity 0.3s ease-in-out; */
}

/* Opzionale: classe per animare l'entrata */
/* .modal-overlay.visible {
    opacity: 1;
} */

.shopping-list-container {
    font-family: 'Press Start 2P', monospace;
    background-color: #000000;
    border: 2px solid #00ffcc;
    padding: 20px;
    color: #ffffff; /* Testo chiaro default */
    width: 90%;
    max-width: 550px; /* Leggermente più largo */
    max-height: 85vh; /* Altezza massima */
    display: flex;
    flex-direction: column;
    position: relative; /* Per posizionare il pulsante chiusura */
    box-shadow: 0 0 20px rgba(0, 255, 204, 0.7); /* Ombra più pronunciata */
    /* Opzionale: animazione entrata */
    /* transform: scale(0.9);
    transition: transform 0.3s ease-in-out; */
}

/* Opzionale: animazione entrata */
/* .modal-overlay.visible .shopping-list-container {
    transform: scale(1);
} */

.close-button {
    position: absolute;
    top: 8px;
    right: 8px;
    background: none;
    border: 2px solid #a8ff60;
    border-radius: 50%; /* Cerchio */
    font-family: sans-serif;
    font-size: 18px; /* Dimensione X */
    font-weight: bold;
    color: #a8ff60;
    cursor: pointer;
    padding: 0;
    width: 28px; /* Dimensione bottone */
    height: 28px; /* Dimensione bottone */
    line-height: 24px; /* Centra la X verticalmente */
    text-align: center;
    transition: background-color 0.2s, color 0.2s;
}
.close-button:hover {
    background-color: #a8ff60;
    color: #003300;
}

.shopping-list-title {
    font-size: 18px;
    color: #a8ff60; /* Verde lime brillante */
    text-align: center;
    text-transform: uppercase;
    margin: 0;
    margin-bottom: 15px; /* Spazio sotto il titolo */
    padding-bottom: 10px;
    border-bottom: 1px solid #00ffcc;
}

.shopping-list-content {
    overflow-y: auto; /* Scroll verticale se necessario */
    flex-grow: 1; /* Occupa lo spazio rimanente */
    padding-right: 5px; /* Spazio per la scrollbar */

    /* Stili Scrollbar */
    scrollbar-width: thin; /* Stile scrollbar Firefox */
    scrollbar-color: #a8ff60 #0f380f; /* Colore thumb e traccia Firefox */
}

.shopping-list-content::-webkit-scrollbar {
    width: 8px; /* Larghezza scrollbar */
}

.shopping-list-content::-webkit-scrollbar-track {
    background: #0f380f; /* Sfondo traccia (verde scuro) */
    border-radius: 4px;
}

.shopping-list-content::-webkit-scrollbar-thumb {
    background-color: #a8ff60; /* Colore thumb (verde brillante) */
    border-radius: 4px;
    border: 1px solid #0f380f; /* Bordo thumb */
}

.shopping-list-content h3 { /* Titoli sezioni (Green Items, etc.) */
    color: #00ffcc; /* Colore diverso per i titoli di sezione */
    font-size: 15px;
    margin-top: 15px;
    margin-bottom: 8px;
    text-transform: uppercase;
    border-bottom: 1px dashed #00ffcc;
    padding-bottom: 4px;
}
.shopping-list-content h3:first-child {
    margin-top: 0;
}

.shopping-list {
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 13px; /* Dimensione font item leggermente ridotta */
    color: #e0ffe0; /* Testo corpo leggermente verde */
}

.shopping-list-item {
    display: flex;
    align-items: center;
    border-bottom: 1px dotted rgba(168, 255, 96, 0.4);
    gap: 10px; /* Aumento leggero gap per spaziare dall'immagine più grande */
}
.shopping-list-item:last-child {
    border-bottom: none;
}

.item-image {
    width: 36px; /* Aumentato da 28px */
    height: 36px; /* Aumentato da 28px */
    object-fit: contain;
    flex-shrink: 0;
    background-color: rgba(255, 255, 255, 0.1); /* Sfondo leggero per vedere meglio le immagini */
    border-radius: 3px;
}

.item-name {
    flex-grow: 1;
    text-align: left;
    color: #ffffff; /* Nome più bianco */
    font-size: 14px; /* Mantenuto o aggiustare se necessario */
}

.item-effect {
    text-align: right;
    font-size: 12px;
    color: #a8ff60;
    flex-shrink: 0;
    min-width: 60px; /* Mantenuto o aggiustare se necessario */
    font-weight: bold;
}

/* Stile per item raccolti (esempio, non implementato qui) */
.shopping-list-item.collected {
    text-decoration: line-through;
    opacity: 0.5;
}
.shopping-list-item.collected .item-effect {
    text-decoration: none;
}

/* Responsive per la modal */
@media (max-width: 600px) {
    .shopping-list-container {
        width: 95%;
        padding: 15px;
        max-height: 90vh; /* Più altezza su mobile */
    }
    .shopping-list-title {
        font-size: 16px;
    }
    .shopping-list-content h3 {
        font-size: 14px;
    }
    .shopping-list {
        font-size: 12px;
    }
    .item-image {
        width: 30px; /* Aumentato anche qui, ma meno che su desktop */
        height: 30px;
    }
    .item-effect {
        font-size: 11px;
        min-width: 75px;
    }
    .close-button {
        width: 24px;
        height: 24px;
        font-size: 16px;
        line-height: 20px;
        top: 5px;
        right: 5px;
    }
}

/* Stili per la finestra modale */
.retro-window {
    display: none; /* Nascosto di default */
    position: fixed; /* Rimane fisso durante lo scroll */
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%); /* Centra la finestra */
    width: 90%; /* MODIFICATO: Coerente con .modal-content e .retro-container */
    max-width: 600px; /* MODIFICATO: Coerente con .modal-content e .retro-container */
    background-color: #000000; /* Sfondo nero */
    border: 4px solid #ffffff; /* AGGIUNTO: Bordo bianco esterno come #factsScreen */
    color: #e0ffe0; /* Testo verde chiaro */
    font-family: 'Press Start 2P', monospace, sans-serif;
    z-index: 1000; /* Assicura che sia sopra gli altri elementi */
    padding: 20px; /* MODIFICATO/AGGIUNTO: Padding tra bordo esterno e contenuto */
    box-shadow: 0 0 10px #a8ff60, 0 0 20px #a8ff60; /* Ombra identica a #factsScreen */
    box-sizing: border-box; /* AGGIUNTO: Per coerenza e gestione del box model */
}

.retro-window .retro-border {
    padding: 0; /* MODIFICATO: Padding interno ora gestito da .retro-window */
    text-align: center;
    position: relative; /* Mantenuto per close-button */
    background-color: transparent; /* Assicura trasparenza */
}

/* Media Query per desktop */
@media (min-width: 768px) {
    .retro-window .retro-content h2 {
        font-size: 22px; /* Dimensione titolo desktop */
    }

    .retro-window .text-area p {
        font-size: 16px; /* Dimensione testo corpo desktop */
    }
}

/* Media Query per schermi molto piccoli */
@media (max-width: 480px) {
    .retro-window .text-area p {
        font-size: 13px; /* Dimensione testo corpo mobile piccolo */
    }
}

/* Stili Game Over (Generale - Rimuovi !important non necessari) */
#gameOver,
.game-over-screen { /* <<-- APPLICA A ENTRAMBI */
    display: none; /* Modificato da JS in 'flex' per mostrare */
    flex-direction: column; /* Mantiene l'impilamento verticale di content/buttons */
    align-items: center;    /* Mantiene centraggio orizzontale */
    justify-content: center;/* Mantiene centraggio verticale */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.85); /* MODIFICATO: Nero semi-trasparente */
    z-index: 1000;
    padding: 20px; /* Padding per l'overlay, per distanziare la finestra interna dai bordi */
    box-sizing: border-box;
    text-align: center;
    font-family: 'Press Start 2P', cursive;
    color: white;
}

/* NUOVA REGOLA GENERALIZZATA per la finestra di contenuto del Game Over */
/* Questa regola si applicherà a .game-over-content dentro QUALSIASI .game-over-screen */
.game-over-screen > .game-over-content {
    background-color: #000000; /* Sfondo nero */
    border: 4px solid #ffffff; /* Bordo bianco */
    box-shadow: 0 0 10px #a8ff60, 0 0 20px #a8ff60; /* Ombra verde stile retro */
    padding: 20px; /* Padding interno alla finestra, coerente con .retro-window */
    width: 90%; /* Larghezza della finestra rispetto all'overlay */
    max-width: 600px; /* Larghezza massima, coerente con .retro-window */
    text-align: center; /* Centra il testo all'interno della finestra */
    margin-bottom: 20px; /* Spazio sotto questa finestra e prima di altri elementi (es. bottoni) */
    box-sizing: border-box; /* Include padding e border nella width/height */
    color: #e0ffe0; /* Colore testo verde chiaro, opzionale, per coerenza con .retro-window */
                     /* Se commentato, erediterà 'white' da .game-over-screen */
}

/* La regola .game-over-content esistente può rimanere per width/max-width se necessario, */
/* ma background, border, shadow, padding dovrebbero essere gestiti dalla regola più specifica sopra. */
.game-over-content {
    width: 100%; /* Occupa la larghezza del suo contenitore (la finestra stilizzata) */
    /* max-width: 600px;  Questa è già definita nella regola .game-over-screen > .game-over-content */
    text-align: center;
    /* margin-bottom: 10px; Questa è già definita e potenzialmente sovrascritta dalla regola più specifica */
}

/* Contenitore Bottoni */
#gameOver .game-over-buttons,
.game-over-screen .game-over-buttons { /* <<-- APPLICA A ENTRAMBI */
    display: flex;
    flex-direction: row; /* MODIFICATO: Bottoni in riga di default */
    align-items: center; /* Centra verticalmente i bottoni */
    justify-content: center; /* Centra i bottoni orizzontalmente */
    gap: 15px;
    width: 100%;
    max-width: 600px; /* MODIFICATO: Larghezza adatta per bottoni in riga */
    margin-top: 20px; /* AGGIUNTO/RIPRISTINATO: Spazio sopra i bottoni */
    margin-bottom: 0;
}

/* Stile singolo bottone dentro il contenitore */
#gameOver .game-over-buttons .retro-button,
.game-over-screen .game-over-buttons .retro-button { /* <<-- APPLICA A ENTRAMBI */
    width: auto; /* MODIFICATO: Larghezza automatica di default */
    margin: 0;
    box-sizing: border-box;
    flex-shrink: 0; /* Impedisce ai bottoni di restringersi troppo */
}

/* Opzionale: Gestione wrap su schermi piccoli */
@media (max-width: 400px) { /* Aggiusta breakpoint se necessario */
    #gameOver .game-over-buttons,
    .game-over-screen .game-over-buttons {
        flex-wrap: wrap; /* Permette ai bottoni di andare a capo */
        max-width: 300px; /* Riduci larghezza massima se vanno a capo */
        gap: 10px; /* Riduci gap se vanno a capo */
    }
}

/* Stili specifici per la schermata di gioco */
#gameScreen {
    display: none; /* Mantiene nascosto inizialmente */
    flex-direction: column; /* Allinea header, canvas, controlli in colonna */
    align-items: center; /* Centra il canvas orizzontalmente se più stretto */
    width: 800px; /* Imposta larghezza fissa = larghezza canvas */
    height: auto; /* Altezza si adatta al contenuto (header + canvas + controlli) */
    /* Rimuovi eventuali max-width/width: 100% ereditati o specifici */
    max-width: none;
    background-color: #000; /* Sfondo nero per coerenza */
    border: 4px solid #ffffff; /* Bordo come gli altri container */
    padding: 10px; /* Padding interno */
    box-shadow: 0 0 10px #a8ff60, 0 0 20px #a8ff60; /* Effetto glow */
    position: relative; /* Per posizionamento elementi interni se necessario */
    box-sizing: border-box; /* Include padding/border nel width */
}

.game-header {
    display: flex;
    justify-content: space-between;
    width: 100%; /* Occupa tutta la larghezza di #gameScreen */
    padding: 5px 10px;
    background-color: rgba(0, 0, 0, 0.5); /* Sfondo semi-trasparente */
    box-sizing: border-box;
    color: #fff;
    font-size: 16px;
    margin-bottom: 10px; /* Spazio tra header e canvas */
}

/* Assicura che il canvas non venga stirato */
#gameCanvas {
    display: block; /* Rimuove spazio extra sotto il canvas */
    width: 800px; /* Larghezza esplicita */
    height: 600px; /* Altezza esplicita */
    max-width: 100%; /* Impedisce al canvas di superare il contenitore su schermi piccoli */
    object-fit: contain; /* Mantiene le proporzioni se ridimensionato */
    image-rendering: pixelated; /* Mantiene l'aspetto pixel art se ridimensionato */
    image-rendering: crisp-edges; /* Alternativa per alcuni browser */
    background-color: #111; /* Sfondo di fallback se l'immagine non carica */
}

.score-container, .timer-container, .challenge-container {
    /* Stili esistenti o nuovi per questi elementi */
    flex-basis: 30%; /* Esempio: distribuisce lo spazio */
    text-align: center;
}

.challenge-container {
    flex-basis: 40%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.challenge-title {
    font-size: 12px;
    margin-bottom: 5px;
}

.challenge-items {
    display: flex;
    gap: 5px;
}

.challenge-item {
    position: relative; /* NECESSARIO per posizionare ::after sul DIV */
    display: inline-block; /* O flex, assicura che abbia dimensioni */
    line-height: 0; /* Evita spazi extra sotto l'immagine se inline-block */
}

.challenge-item img {
    width: 30px; /* Dimensione icone sfida */
    height: 30px;
    object-fit: contain;
    background-color: rgba(255, 255, 255, 0.1); /* Leggero sfondo per visibilità */
    border: 1px solid #a8ff60;
    border-radius: 3px;
    transition: filter 0.3s ease, opacity 0.3s ease;
    display: block; /* Comportamento prevedibile */
}

.challenge-item.collected img {
    filter: grayscale(100%);
    opacity: 0.5;
}

.challenge-item.collected::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #a8ff60; /* Colore verde brillante */
    font-size: 24px; /* Dimensione spunta */
    font-weight: bold;
    text-shadow: 1px 1px 2px black;
    z-index: 1; /* Sopra l'immagine interna */
    pointer-events: none;
    opacity: 1 !important; /* FORZA OPACITÀ 1 per sicurezza */
}

/* Stili per gli item della challenge nel game header */
#challengeItems {
    display: flex;
    gap: 5px; /* Spazio tra le immagini */
    align-items: center;
    justify-content: center; /* Centra gli item se c'è spazio extra */
    margin-top: 5px;
}

#challengeItems img {
    width: 30px; /* Dimensione base delle icone */
    height: 30px;
    object-fit: contain;
    background-color: rgba(255, 255, 255, 0.1); /* Leggero sfondo per visibilità */
    border: 1px solid #a8ff60;
    border-radius: 3px;
    transition: filter 0.3s ease, opacity 0.3s ease;
    position: relative; /* NECESSARIO per posizionare lo pseudo-elemento ::after */
}

/* Stile per l'item raccolto (grayscale/opacity) */
#challengeItems .challenge-item.collected img {
    filter: grayscale(100%);
    opacity: 0.5;
}

/* NUOVA REGOLA: Aggiunge la spunta sull'item raccolto */
#challengeItems .challenge-item.collected img::after {
    content: '✓'; /* Il carattere della spunta */
    position: absolute; /* Posiziona sopra l'immagine */
    top: 50%; /* Centra verticalmente */
    left: 50%; /* Centra orizzontalmente */
    transform: translate(-50%, -50%); /* Corregge il centraggio */
    color: #a8ff60; /* Colore verde brillante */
    font-size: 24px; /* Dimensione della spunta */
    font-weight: bold; /* Grassetto per visibilità */
    text-shadow: 1px 1px 2px black; /* Ombra per contrasto (opzionale) */
    z-index: 1; /* Assicura che sia sopra l'immagine */
    pointer-events: none; /* Non interferisce con i click */
}

/* Stili per i controlli mobile */
.mobile-controls {
    display: none; /* Nascosto di default, mostrato da JS su mobile */
    width: 100%;
    padding: 10px;
    box-sizing: border-box;
    margin-top: 10px; /* Spazio dal canvas */
}

.swipe-area {
    width: 100%;
    height: 80px; /* Altezza area swipe */
    background-color: rgba(255, 255, 255, 0.1); /* Sfondo leggermente visibile */
    border: 2px dashed #a8ff60;
    border-radius: 5px;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #a8ff60;
    font-size: 14px;
    user-select: none; /* Impedisce la selezione del testo */
    -webkit-user-select: none; /* Safari */
    -ms-user-select: none; /* IE/Edge */
    touch-action: none; /* Disabilita azioni touch predefinite come lo scroll */
}

/* Animazione Coin */
.coin-animation {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0); /* Inizia invisibile e piccolo */
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color: rgba(0, 0, 0, 0.7);
    padding: 20px;
    border-radius: 10px;
    z-index: 1100; /* Sopra tutto */
    opacity: 0;
    transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.5s ease-out;
    pointer-events: none; /* Non interagibile quando nascosto/trasparente */
    max-width: 250px; /* Limita larghezza massima contenitore */
}

.coin-animation.show {
    transform: translate(-50%, -50%) scale(1); /* Diventa visibile e scala alla dimensione normale */
    opacity: 1;
    pointer-events: auto; /* Interagibile quando visibile */
}

.coin-animation img {
    width: 80px; /* Dimensione moneta */
    height: 80px;
    margin-bottom: 10px;
    animation: spin 1s linear infinite; /* Animazione rotazione */
    max-width: 100%; /* Sicurezza */
}

@keyframes spin {
    from { transform: rotateY(0deg); }
    to { transform: rotateY(360deg); }
}

/* Definisci l'animazione */
@keyframes subtleBobbing {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-4px); /* Leggero movimento verticale */
  }
}

/* Aggiungi media query per rendere #gameScreen responsivo */
@media (max-width: 840px) { /* Larghezza leggermente maggiore di 800 + padding/border */
    #gameScreen {
        width: 100%; /* Occupa tutta la larghezza disponibile */
        /* height: auto; rimane auto */
    }

    /* Il canvas si ridimensionerà automaticamente grazie a max-width: 100% e object-fit: contain */
    /* Potrebbe essere necessario aggiustare la dimensione del font nell'header */
    .game-header {
        font-size: 14px;
    }
    .challenge-item img {
        width: 25px;
        height: 25px;
    }
}

@media (max-width: 480px) {
    .game-header {
        font-size: 12px;
        padding: 3px 5px;
    }
    .challenge-item img {
        width: 20px;
        height: 20px;
    }
    .score-container, .timer-container {
        flex-basis: 25%; /* Più spazio per score/timer */
    }
    .challenge-container {
        flex-basis: 50%; /* Meno spazio per le icone sfida */
    }
    .swipe-area {
        height: 60px; /* Riduci altezza area swipe */
        font-size: 12px;
    }
    /* Riduci font size in game over e score chart se necessario */
    .game-over-content h2 { font-size: 20px; }
    .game-over-content p { font-size: 16px; }
    #feedback { font-size: 14px; }
    .shopping-cart-container h3 { font-size: 14px; }
    .collected-items-list { font-size: 12px; }
    .collected-item-points { min-width: 80px; font-size: 11px; }
    .modal-content h3 { font-size: 16px; }
    .score-item { font-size: 12px; }
    .score-date { font-size: 10px; }

    /* Game Over specific adjustments for small screens */
    .result-container {
        gap: 5px;
        margin-bottom: 15px;
    }
    #medalImage {
        width: 100px;
        height: 100px;
    }
    .wizard-title {
        font-size: 16px;
    }
    .shopping-cart-container {
        max-height: 35vh; /* Aumentato leggermente */
        padding: 8px;
    }
    #collectedItemsList .collected-item-image {
        width: 20px;
        height: 20px;
    }
    .game-over-buttons {
        gap: 10px;
    }
}

/* Stili Game Over */
#gameOver {
    display: none; /* Modificato da JS in 'flex' per mostrare */
    flex-direction: column; /* Allinea header, canvas, controlli in colonna */
    align-items: center; /* Centra il canvas orizzontalmente se più stretto */
    justify-content: center; /* Centra il canvas verticalmente */
    position: fixed; /* Posiziona rispetto alla viewport */
    top: 0;
    left: 0;
    width: 100%; /* Occupa tutta la larghezza */
    height: 100%; /* Occupa tutta l'altezza */
    background-color: rgba(0, 0, 0, 0.85); /* Sfondo overlay semi-trasparente */
    z-index: 1000; /* Assicurati sia sopra il gioco ma sotto altre modali */
    padding: 20px; /* Padding per distanziare il box interno dai bordi schermo */
    box-sizing: border-box;
    text-align: center; /* Centra il testo all'interno degli elementi figli */
    font-family: 'Press Start 2P', cursive; /* Assicura font corretto */
    color: white; /* Assicura colore testo predefinito */
}

/* Il box interno con lo sfondo nero e bordo */
#gameOver .game-over-content { /* Selettore più specifico se necessario */
    background-color: #000000; /* Sfondo nero */
    border: 4px solid #ffffff; /* Bordo bianco */
    box-shadow: 0 0 10px #a8ff60, 0 0 20px #a8ff60; /* Ombra */
    padding: 15px; /* RIDOTTO: Padding interno */
    width: 90%; /* Larghezza del box rispetto all'overlay */
    max-width: 600px; /* Larghezza massima */
    text-align: center; /* Centra testo interno (h2, p) */
    margin-bottom: 10px; /* RIDOTTO: Spazio sotto il contenuto, prima dei bottoni */
    /* Rimuovi eventuali stili ereditati non desiderati se necessario */
}

.game-over-content {
    width: 100%; /* Assicura che occupi la larghezza per centrare il testo */
    max-width: 600px; /* Limita larghezza massima */
    text-align: center; /* Centra testo come h2, p */
    margin-bottom: 10px; /* RIDOTTO: Spazio sotto il contenuto principale */
}

.game-over-content .result-container {
    margin-bottom: 20px; /* Spazio sotto l'intero blocco risultati */
    display: flex; /* Usa flex per controllare meglio l'allineamento e lo spazio */
    flex-direction: column; /* Impila gli elementi verticalmente */
    align-items: center; /* Centra gli elementi orizzontalmente */
    gap: 10px; /* AGGIUNTO: Spazio uniforme tra gli elementi figli */
    text-align: center; /* Assicura che il testo interno sia centrato se necessario */
}

.game-over-content #feedback {
    /* margin-bottom: 10px; */ /* Commentato/Rimosso perché usiamo 'gap' */
    font-size: 1.1em;
    color: #a8ff60; /* Colore lime per il feedback */
    font-weight: bold;
}

.game-over-content .medal-image { 
    max-width: 100px; /* Aumentato da 80px */
    height: auto;
    display: block;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 15px; 
    animation: subtleBobbing 1.8s ease-in-out infinite;
}

#medalImage {
    display: block;
    margin: 5px auto 5px auto; /* RIDOTTO Margine sopra/sotto per compensare */
    max-width: 120px; /* AUMENTATO: Dimensione massima medaglia */
    max-height: 120px; /* AUMENTATO: Dimensione massima medaglia */
    object-fit: contain;
    transition: width 0.3s ease, height 0.3s ease;
}

/* Stile specifico per l'immagine del mago */
#medalImage.wizard-medal {
    width: 140px;  /* AUMENTATO: Dimensione mago */
    height: 140px; /* AUMENTATO: Dimensione mago */
    margin-bottom: 0px; /* Mantenuto basso */
    /* margin-top: 5px; (gestito da margin in #medalImage) */
}

.wizard-title {
    display: block; /* Assicura che sia visibile quando la classe è aggiunta */
    color: #ffeb3b; /* Colore oro */
    font-size: 16px; /* RIDOTTO: Dimensione font */
    margin-top: 5px; /* Piccolo spazio sopra */
    margin-bottom: 5px; /* RIDOTTO: Margine sotto */
    font-weight: bold;
    text-shadow: 1px 1px #000;
}

#gameOver .shopping-cart-container {
    width: 100%;
    max-width: 600px; /* Mantieni larghezza massima coerente */
    margin-bottom: 20px; /* Spazio sotto il carrello */
    max-height: 35vh; /* AUMENTATO LEGGERMENTE: Dà più spazio alla lista */
    overflow-y: auto;
    border: 2px solid #a8ff60;
    padding: 10px;
    background-color: #0f380f; /* Sfondo verde scuro */
    box-sizing: border-box;
    scrollbar-width: thin;
    scrollbar-color: #a8ff60 #004d00;
}
#gameOver .shopping-cart-container::-webkit-scrollbar { width: 8px; }
#gameOver .shopping-cart-container::-webkit-scrollbar-track { background: #004d00; }
#gameOver .shopping-cart-container::-webkit-scrollbar-thumb { background-color: #a8ff60; }

#gameOver .shopping-cart-container h3 {
    color: #a8ff60;
    font-size: 16px;
    margin-bottom: 10px;
    text-align: center;
    border-bottom: 1px dashed #a8ff60;
    padding-bottom: 5px;
}

#gameOver .collected-items-list {
    font-size: 13px;
}

#gameOver .collected-item { /* Applica a .collected-item dentro #gameOver */
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 0px; /* Uniformato a shopping-list-row */
    border-bottom: 1px dotted rgba(168, 255, 96, 0.3); /* Uniformato */
    gap: 8px;
}
#gameOver .collected-item:last-child { border-bottom: none; }

#gameOver .collected-item-image { /* Applica a .collected-item-image dentro #gameOver */
    width: 40px; /* Aumentato da 28px */
    height: 40px; /* Aumentato da 28px */
    object-fit: contain;
    flex-shrink: 0;
    background-color: rgba(255, 255, 255, 0.1); /* Uniformato */
    border-radius: 3px; /* Uniformato */
}

#gameOver .collected-item-name { /* Applica a .collected-item-name dentro #gameOver */
    flex-grow: 1;
    text-align: left;
    color: #ffffff; /* Uniformato */
    display: flex; /* Per allineare immagine e testo */
    align-items: center;
}

#gameOver .collected-item-points { /* Applica a .collected-item-points dentro #gameOver */
    text-align: right;
    font-size: 12px; /* Uniformato */
    flex-shrink: 0;
    min-width: 90px; /* Uniformato */
    font-weight: bold; /* Uniformato */
}
#gameOver .collected-item-points.positive { color: #4CAF50; } /* Mantenuto */
#gameOver .collected-item-points.negative { color: #F44336; } /* Mantenuto */

/* Centra i pulsanti di Game Over */
#gameOver .game-over-buttons {
    display: flex;
    flex-direction: row; /* Bottoni in riga di default */
    align-items: center; /* Centra i bottoni impilati */
    justify-content: center; /* Centra i bottoni orizzontalmente */
    gap: 15px; /* Spazio tra i pulsanti */
    width: 100%; /* Occupa la larghezza disponibile */
    max-width: 600px; /* Larghezza massima per i bottoni in riga */
    margin-top: 20px; /* Aggiunge un po' di spazio sopra i bottoni */
    margin-bottom: 0; /* Rimuovi margine inferiore se presente */
}

/* Stili per la modale Score Chart (verifica che siano corretti) */
.modal { /* Riferito a #scoreChartModal, #ecoLogModal, #shoppingListModal etc. */
    display: none; /* Nascosto di default */
    position: fixed;
    z-index: 1001; /* Sopra la schermata game over */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.7); /* Sfondo scuro semi-trasparente */
    display: flex; /* Usa flexbox per centrare */
    align-items: center; /* Centra verticalmente il contenuto */
    justify-content: center; /* Centra orizzontalmente il contenuto */
}

/* NUOVA REGOLA GENERICA PER TUTTI I CONTENUTI MODALI */
.modal-content {
    background-color: #000000; /* Sfondo nero per tutti i contenuti modali */
    padding: 20px;
    border: 4px solid #ffffff; /* Bordo bianco come le altre finestre */
    color: #e0ffe0; /* Testo verde chiaro default */
    font-family: 'Press Start 2P', monospace, sans-serif;
    position: relative; /* Per posizionamento close-button */
    box-shadow: 0 0 10px #a8ff60, 0 0 20px #a8ff60; /* Ombra come le altre */
    max-width: 600px; /* Larghezza massima comune */
    width: 90%; /* Larghezza comune */
    text-align: center; /* Centra testo di default */
    display: flex; /* Usa flexbox per layout interno */
    flex-direction: column; /* Impila elementi verticalmente */
    align-items: center; /* Centra elementi orizzontalmente */
    box-sizing: border-box; /* Aggiunto per coerenza */
}

.score-item {
    margin-bottom: 20px; /* Aumentato a 20px per più spazio */
}

/* Regola più generica per forzare lo sfondo dei titoli */
#factsScreen h2, /* Titolo originale in #factsScreen */
#factsScreen h3, /* Possibile titolo h3 in #factsScreen */
#ecoLogModal h3, /* Titolo in #ecoLogModal */
.modal-content h2, /* Qualsiasi h2 in una modale generica */
.modal-content h3  /* Qualsiasi h3 in una modale generica */
{
    background-color: transparent !important; /* Forza sfondo TRASPARENTE */
    color: #a8ff60;
    margin-bottom: 15px;
    /* Rimuovi padding se aggiunto prima */
    /* padding-left: 10px; */
    /* padding-right: 10px; */
}

/* --- Stili Uniformati per Eco Log Modal --- */

/* Contenitore Lista Scrollabile - Stile basato su .facts-container */
.eco-log-list {
    max-height: 60vh; /* Come .facts-container */
    overflow-y: auto;
    padding: 15px; /* Come .facts-container */
    border: 2px dashed #555; /* Come .facts-container */
    background-color: rgba(255, 255, 255, 0.05); /* Come .facts-container */
    margin-top: 15px;
    margin-bottom: 20px; /* Aggiunto per spazio sotto */
    width: 90%; /* Come .facts-container */
    max-width: 500px; /* Come .facts-container */
    text-align: left; /* Resetta text-align se necessario */
}

/* Intestazioni Categoria (Fuels, Hazards, etc.) */
.eco-log-list h4 {
    font-family: 'Press Start 2P', cursive; /* Font consistente */
    color: #fff;
    margin-top: 15px;
    margin-bottom: 10px;
    border-bottom: 1px dashed #a8ff60;
    padding-bottom: 5px;
    font-size: 1.1em; /* Dimensione appropriata */
}
.eco-log-list h4:first-of-type {
    margin-top: 0;
}

/* Singolo Elemento Lista - Stile basato su elementi in .facts-container */
.eco-log-item {
    display: flex;
    align-items: center;
    margin-bottom: 12px; /* Spazio tra elementi */
    padding: 8px 5px; /* Padding leggero */
    /* background-color: rgba(0, 0, 0, 0.1); */ /* Rimosso/commentato se non presente in facts */
    border-bottom: 1px solid #444; /* Separatore leggero se presente in facts */
}
.eco-log-item:last-child {
    border-bottom: none; /* Rimuovi bordo per l'ultimo elemento */
    margin-bottom: 0;
}


/* Immagine Elemento - Stile basato su immagini in .facts-container */
.eco-log-item-image {
    width: 50px;  /* <<< DIMENSIONE CORRETTA da .facts-container */
    height: 50px; /* <<< DIMENSIONE CORRETTA da .facts-container */
    object-fit: contain;
    margin-right: 15px; /* Spazio aumentato leggermente */
    flex-shrink: 0;
    /* border: 1px solid #555; */ /* Rimosso/commentato se non presente in facts */
    /* background-color: #333; */ /* Rimosso/commentato se non presente in facts */
    vertical-align: middle; /* Aiuta con l'allineamento */
}

/* Dettagli Testuali Elemento - Stile basato su testo in .facts-container */
.eco-log-item-details {
    font-family: 'Press Start 2P', monospace; /* O il font usato per i dettagli in facts */
    font-size: 0.95em; /* Dimensione testo dettagli */
    color: #fff;
    line-height: 1.4;
}

.eco-log-item-details strong {
    font-family: 'Press Start 2P', cursive; /* Font per il nome oggetto */
    color: #00ffcc;
    margin-right: 8px; /* Spazio dopo il nome */
    font-size: 0.9em; /* Leggermente più piccolo del testo normale */
    display: block; /* Per spaziatura corretta */
}

/* Stili Scrollbar - Come .facts-container */
.eco-log-list::-webkit-scrollbar {
    width: 8px;
}
.eco-log-list::-webkit-scrollbar-track {
    background: #222; /* Sfondo track */
    border-radius: 4px;
}
.eco-log-list::-webkit-scrollbar-thumb {
    background-color: #a8ff60; /* Colore thumb */
    border-radius: 4px;
    border: 2px solid #222; /* Bordo thumb per contrasto */
}

/* Stili scrollbar per Firefox */
.facts-container { /* Corretto il selettore */
    scrollbar-width: thin; /* Rende la scrollbar più sottile */
    scrollbar-color: #a8ff60 #0f380f; /* Colore thumb e track */
}

/* AGGIUNTO: Stili espliciti per figli diretti */
.facts-container {
    max-height: 300px; /* Altezza massima prima dello scroll */
    overflow-y: auto; /* Scroll verticale se il contenuto eccede */
    padding: 10px;
    background-color: rgba(0, 0, 0, 0.7); /* Sfondo semi-trasparente scuro */
    border-radius: 5px;
    margin-top: 10px; /* Spazio dal titolo della modale */
}

.facts-container > h3 {
    background-color: transparent !important;
    color: #a8ff60;
    font-size: 1.1em;
    text-align: left;

    border-top:  1px dashed #a8ff60;    /* Linea sopra per tutti */
    border-bottom: 1px dashed #a8ff60; /* Linea sotto per tutti */

    padding-top: 10px;    /* Spazio tra linea sopra e testo */
    padding-bottom: 10px; /* Spazio tra testo e linea sotto */

    margin-top: 20px;     /* Spazio sopra la linea superiore */
    margin-bottom: 10px;  /* Spazio sotto la linea inferiore */
}

.facts-container > h3:first-of-type {
    margin-top: 10px; 
}

.facts-container > hr {
    border: none; /* Rimuovi bordo di default */
    display: none; /* Nasconde eventuali <hr> dato che le linee sono gestite dagli h3 */
}

/* Opzionale: Assicura che gli item interni non abbiano sfondi strani */
.fact-item { /* Assumendo che gli item abbiano questa classe, altrimenti adattare */
    background-color: transparent !important; /* AGGIUNTO !important */
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 5px; /* Aggiunto padding */
    border-bottom: 1px dotted rgba(168, 255, 96, 0.3); /* Separatore leggero */
}
.fact-item:last-of-type { /* Rimuovi bordo dall'ultimo item di ogni sezione */
     border-bottom: none;
}

/* Stili scrollbar Webkit per .facts-container */
.facts-container::-webkit-scrollbar {
    width: 8px;
}

.facts-container::-webkit-scrollbar-track {
    background: #222; /* Track DARK GRAY (#222) - RIMOSSO !important */
    border-radius: 4px;
}

.facts-container::-webkit-scrollbar-thumb {
    background-color: #a8ff60; /* Thumb LIME */
    border-radius: 4px;
    border: 2px solid #222; /* Bordo DARK GRAY (#222) */
}

#loading-image {
    width: 100px; /* O la dimensione che hai impostato */
    height: 100px; /* O la dimensione che hai impostato */
    margin-bottom: 20px;
    image-rendering: pixelated;
    animation: spin 2s linear infinite; /* AGGIUNTA ANIMAZIONE */
}

/* AGGIUNTA KEYFRAMES PER L'ANIMAZIONE */
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

#loadingProgressContainer {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    max-width: 400px;
    background-color: rgba(0, 0, 0, 0.8);
    border: 4px solid #a8ff60;
    padding: 20px;
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    box-shadow: 0 0 15px #a8ff60, 0 0 30px #a8ff60;
    opacity: 0.9;
}

#loadingProgressContainer h2 {
    font-size: 18px;
    margin-bottom: 10px;
    color: #a8ff60;
    text-align: center;
}

#loadingProgressContainer p {
    font-size: 14px;
    margin: 0;
    color: #ffffff;
    text-align: center;
}

#progressBar {
    width: 100%;
    height: 10px;
    background-color: #333;
    border-radius: 5px;
    overflow: hidden;
    margin-top: 10px;
    position: relative;
    width: 100%;
}

#progressBar div {
    height: 100%;
    background-color: #a8ff60;
    transition: width 0.4s ease;
    border-radius: 5px;
    position: absolute;
    left: 0;
    top: 0;
}

/* Animazione per il caricamento */
@keyframes loadingAnim {
    0% { transform: scaleX(0); }
    100% { transform: scaleX(1); }
}

#progressBar div {
    animation: loadingAnim 2s ease-in-out forwards;
}

/* Aggiunto per il testo di stato caricamento */
#loadingStatus {
    font-size: 14px;
    color: #ffffff;
    margin-top: 5px;
    text-align: center;
    width: 100%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    white-space: nowrap; /* Impedisce il wrapping del testo */
    overflow: hidden; /* Nasconde il testo in eccesso */
    text-overflow: ellipsis; /* Aggiunge i puntini di sospensione se il testo è troppo lungo */
}

/* Aggiunto per centrare l'immagine di caricamento */
#loading-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    width: 100%;
    position: relative;
}

/* Stile per il messaggio personale sulla homepage */
#personalMessage {
    display: block; /* Visibile di default */
    text-align: center;
    padding: 15px 10px;
    color: #a8ff60; /* Colore verde "Game Boy" chiaro */
    font-family: 'Press Start 2P', cursive; /* Font principale del gioco */
    font-size: 10px; /* Leggermente più piccolo per discrezione */
    line-height: 1.6; /* Migliore leggibilità per testo multiriga */
    width: 90%; /* Larghezza relativa */
    max-width: 550px; /* Larghezza massima per allinearsi con il contenuto principale */
    margin-top: 20px; /* Margine superiore */
    margin-bottom: 15px; /* Margine inferiore, prima di #startScreen */
    /* margin-left: auto; e margin-right: auto; rimossi, la centratura è gestita da flex su body */
    border: 2px solid #a8ff60; /* Bordo sottile per integrarlo meglio */
    border-radius: 5px; /* Angoli arrotondati */
    background-color: rgba(15, 56, 15, 0.5); /* Sfondo leggermente trasparente del colore base */
}

/* 
  Nascondi il messaggio personale quando una delle altre schermate principali è attiva.
  Questo sfrutta il selettore :has() per verificare lo stile 'display' delle altre schermate.
  interstellarContainer è aggiunto dinamicamente da interstellar.js.
*/
body:has(#gameScreen[style*="display: flex"]) #personalMessage,
body:has(#gameScreen[style*="display: block"]) #personalMessage,
body:has(#factsScreen[style*="display: flex"]) #personalMessage,
body:has(#factsScreen[style*="display: block"]) #personalMessage,
body:has(#gameOver[style*="display: flex"]) #personalMessage,
body:has(#gameOver[style*="display: block"]) #personalMessage,
body:has(#interstellarContainer[style*="display: flex"]) #personalMessage,
body:has(#interstellarContainer[style*="display: block"]) #personalMessage {
    display: none !important; /* Nascondi il messaggio */
}

/* Stili per il contenitore principale dell'app */
#appContainer {
    width: 100%;
    max-width: 800px; /* Larghezza massima per il contenitore principale */
    margin: 0 auto; /* Centra orizzontalmente */
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative; /* Per posizionamento assoluto di elementi interni se necessario */
    box-sizing: border-box;
}

/* Header */
header {
    width: 100%;
    padding: 10px 0;
    background-color: rgba(15, 56, 15, 0.8); /* Verde traslucido */
    color: #a8ff60;
    text-align: center;
    position: relative; /* Per posizionamento assoluto di elementi interni se necessario */
    z-index: 100; /* Sopra altri contenuti ma sotto le modali */
    border-bottom: 2px solid #a8ff60; /* Bordo inferiore */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
}

header h1 {
    font-size: 24px;
    margin: 0;
    font-family: 'Press Start 2P', cursive;
}

/* Pulsante Menu (hamburger) */
.menu-toggle {
    display: none; /* Nascosto di default, mostrato su schermi piccoli */
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 40px;
    height: 40px;
    background-color: transparent;
    border: none;
    cursor: pointer;
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 200; /* Sopra il contenuto ma sotto le modali */
}

.menu-toggle div {
    width: 100%;
    height: 4px;
    background-color: #a8ff60;
    margin: 3px 0;
    transition: all 0.3s ease;
}

/* Mostra l'icona X quando attivo */
.menu-toggle.active div:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
}
.menu-toggle.active div:nth-child(2) {
    opacity: 0;
}
.menu-toggle.active div:nth-child(3) {
    transform: rotate(-45deg) translate(5px, -5px);
}

/* Menu laterale */
.side-menu {
    position: fixed;
    top: 0;
    right: -250px; /* Nascondi a destra */
    width: 250px;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    color: #a8ff60;
    padding: 20px;
    box-shadow: -2px 0 5px rgba(0, 0, 0, 0.7);
    transition: right 0.3s ease;
    z-index: 150; /* Sopra il contenuto ma sotto le modali */
}

/* Mostra il menu quando attivo */
.side-menu.active {
    right: 0;
}

.side-menu h2 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 20px;
    text-align: center;
    font-family: 'Press Start 2P', cursive;
    color: #a8ff60;
}

/* Link del menu */
.side-menu a {
    display: block;
    padding: 10px;
    margin: 10px 0;
    color: #a8ff60;
    text-decoration: none;
    border-radius: 5px;
    transition: background-color 0.3s, color 0.3s;
}

.side-menu a:hover {
    background-color: #a8ff60;
    color: #0f380f;
}

/* Contenitore principale del gioco */
.game-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    padding: 10px;
    box-sizing: border-box;
    position: relative;
}

/* Stili per il punteggio e il timer */
.score-timer-container {
    display: flex;
    justify-content: space-between;
    width: 100%;
    max-width: 800px;
    margin-bottom: 10px;
    padding: 0 10px;
    box-sizing: border-box;
}

.score-timer-container div {
    flex-basis: 48%; /* Circa metà dello spazio disponibile */
    text-align: center;
}

/* Stili per il grafico del punteggio */
#scoreChart {
    width: 100%;
    max-width: 800px;
    height: 300px; /* Altezza fissa per il grafico */
    margin: 20px 0;
}

/* Stili per la schermata di caricamento */
#loadingScreen {
    display: none; /* Nascosto di default */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    color: #a8ff60;
    text-align: center;
    padding: 20px;
    box-sizing: border-box;
    z-index: 10000; /* Sopra tutto */
}

/* Aggiunta di stili per il caricamento delle immagini */
#imageLoadingContainer {
    display: none; /* Nascosto di default */
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    max-width: 400px;
    background-color: rgba(0, 0, 0, 0.8);
    border: 4px solid #a8ff60;
    padding: 20px;
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    box-shadow: 0 0 15px #a8ff60, 0 0 30px #a8ff60;
    opacity: 0.9;
}

#imageLoadingContainer h2 {
    font-size: 18px;
    margin-bottom: 10px;
    color: #a8ff60;
    text-align: center;
}

#imageLoadingContainer p {
    font-size: 14px;
    margin: 0;
    color: #ffffff;
    text-align: center;
}

#imageProgressBar {
    width: 100%;
    height: 10px;
    background-color: #333;
    border-radius: 5px;
    overflow: hidden;
    margin-top: 10px;
    position: relative;
    width: 100%;
}

#imageProgressBar div {
    height: 100%;
    background-color: #a8ff60;
    transition: width 0.4s ease;
    border-radius: 5px;
    position: absolute;
    left: 0;
    top: 0;
}

/* Animazione per il caricamento delle immagini */
@keyframes imageLoadingAnim {
    0% { transform: scaleX(0); }
    100% { transform: scaleX(1); }
}

#imageProgressBar div {
    animation: imageLoadingAnim 2s ease-in-out forwards;
}

/* Aggiunto per il testo di stato caricamento immagini */
#imageLoadingStatus {
    font-size: 14px;
    color: #ffffff;
    margin-top: 5px;
    text-align: center;
    width: 100%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    white-space: nowrap; /* Impedisce il wrapping del testo */
    overflow: hidden; /* Nasconde il testo in eccesso */
    text-overflow: ellipsis; /* Aggiunge i puntini di sospensione se il testo è troppo lungo */
}

/* Aggiunto per centrare l'immagine di caricamento */
#imageLoadingContainer {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    width: 100%;
    position: relative;
}

/* Stili per la schermata di Game Over in Interstellar */
#interstellarGameOver {
    display: none; /* Nascosto di default */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    color: #a8ff60;
    text-align: center;
    padding: 20px;
    box-sizing: border-box;
    z-index: 10000; /* Sopra tutto */
}

/* Immagine di sfondo per Game Over in Interstellar */
#interstellarGameOverImage {
    display: block;
    margin: 0 auto 20px auto; /* Centra orizzontalmente e spazio sotto */
    max-width: 90%; /* Limita larghezza massima */
    height: auto; /* Mantiene proporzioni */
    object-fit: contain; /* Assicura che si adatti senza distorsioni */
}

/* Pulsante per riavviare il gioco in Game Over Interstellar */
#restartInterstellar {
    display: inline-block;
    margin-top: 10px;
    padding: 10px 20px;
    background-color: #a8ff60;
    color: #0f380f;
    text-decoration: none;
    border-radius: 5px;
    font-family: 'Press Start 2P', cursive;
    transition: background-color 0.3s, color 0.3s;
}

#restartInterstellar:hover {
    background-color: #0f380f;
    color: #a8ff60;
}

/* Stili specifici per la modalità Interstellar */

#interstellarCanvas {
    display: block; /* Evita spazi extra sotto il canvas */
    /* Mantieni gli stili inline o spostali qui se preferisci */
    border: 4px solid #FFFFFF; /* OK */
    border-radius: 5px; /* OK */
    background-color: black; /* OK */
    image-rendering: pixelated; /* OK: Mantiene stile pixel art */
    image-rendering: crisp-edges; /* OK: Alternativa */
    margin: 0 auto; /* OK: Centra il canvas se il contenitore è più largo di 800px */
    /* Assicurati che le dimensioni fisse siano impostate nell'HTML/JS (width="800" height="600") */
}

/* Stili specifici per l'immagine nella schermata Game Over di Interstellar */
#interstellarGameOverImage {
    /* Contenitore per l'immagine (es. explosion, lost, planet) */
    width: 100%; /* Occupa lo spazio disponibile nel suo contenitore (.game-over-content) */
    text-align: center; /* Centra l'immagine se è inline-block o block con margin auto */
    margin-bottom: 20px; /* Spazio sotto l'immagine, come definito in JS */
}

#interstellarGameOverImage img {
    /* Regola FONDAMENTALE per limitare la dimensione dell'immagine */
    display: block; /* Comportamento a blocco per usare margin auto */
    margin-left: auto;  /* Centra l'immagine orizzontalmente */
    margin-right: auto; /* Centra l'immagine orizzontalmente */
    max-width: 150px;  /* Imposta una larghezza massima (REGOLA QUESTO VALORE!) */
    max-height: 150px; /* Imposta un'altezza massima (REGOLA QUESTO VALORE!) */
    width: auto;       /* Mantiene le proporzioni originali */
    height: auto;      /* Mantiene le proporzioni originali */
    object-fit: contain; /* Assicura che l'immagine si adatti senza distorsioni */
    animation: subtleBobbing 1.8s ease-in-out infinite; /* AGGIUNTA ANIMAZIONE */
}

/* NUOVA REGOLA: Stile per il feedback testuale dei punti carburante in Interstellar */
.interstellar-fuel-points-text {
    font-family: 'Press Start 2P', monospace; /* Font principale del gioco */
    font-size: 16px; /* AUMENTATO - per feedback visivo immediato */
    color: #a8ff60; /* Colore standard per feedback positivi */
    /* font-weight: bold; RIMOSSO - i testi fluttuanti spesso non sono bold */
    position: absolute; 
    z-index: 1500;      
    pointer-events: none; 
    /* text-shadow: 1px 1px 1px rgba(0,0,0,0.7); RIMOSSO - per semplicità e coerenza se assente nell'altro testo fluttuante */
    /* Il tempo di permanenza e le animazioni (es. salire e svanire)
       sono gestiti da JavaScript. */
}

/* Stili per la modale Interstellar per matchare Eco Log */
#interstellar-window {
    background-color: #000000; /* Sfondo NERO pieno */
    border: 4px solid #a8ff60; /* Bordo verde esterno */
    padding: 20px; /* Aggiungi padding qui per spazio interno */
    box-shadow: 0 0 10px #a8ff60; /* Manteniamo glow */
}

/* Sovrascrivi gli stili del riquadro interno .retro-border SOLO dentro #interstellar-window */
#interstellar-window .retro-border {
    border: none; /* Rimuovi il bordo interno */
    padding: 0; /* Rimuovi il padding interno */
    background-color: transparent; /* Assicura sfondo trasparente */
    animation: none; /* Rimuovi animazione bordo se presente */
    box-shadow: none; /* Rimuovi ombre se presenti */
}

/* Assicura che il contenuto interno non abbia padding/background indesiderati */
#interstellar-window .retro-content {
     padding: 0; /* Rimuovi padding se gestito da #interstellar-window */
     background-color: transparent; /* Assicura sfondo trasparente */
}

/* Stili per la schermata Facts */
#factsScreen {
    display: none; /* Mantiene nascosto inizialmente */
    background-color: #000000 !important; /* IMPOSTA SFONDO NERO */
    width: 90%;
    max-width: 600px; /* Coerente con retro-container */
    border: 4px solid #ffffff; /* Coerente con retro-container */
    padding: 20px; /* Padding interno */
    box-shadow: 0 0 10px #a8ff60, 0 0 20px #a8ff60; /* Coerente con retro-container */
    position: relative; /* O static, a seconda del layout */
    margin: 20px auto; /* Centra e aggiunge margine */
    box-sizing: border-box;
    text-align: center; /* Centra il contenuto */
    flex-direction: column; /* Assicura allineamento verticale se display:flex */
    align-items: center; /* Centra elementi figli */
}

.facts-container {
    max-height: 300px; /* Altezza massima prima dello scroll */
    overflow-y: auto; /* Scroll verticale se il contenuto eccede */
    padding: 10px;
    background-color: rgba(0, 0, 0, 0.7); /* Sfondo semi-trasparente scuro */
    border-radius: 5px;
    margin-top: 10px; /* Spazio dal titolo della modale */
}

.facts-container > h3 {
    background-color: transparent !important;
    color: #a8ff60;
    font-size:   1.1em;
    text-align: left;

    border-top:  1px dashed #a8ff60;    /* Linea sopra per tutti */
    border-bottom: 1px dashed #a8ff60; /* Linea sotto per tutti */

    padding-top: 10px;    /* Spazio tra linea sopra e testo */
    padding-bottom: 10px; /* Spazio tra testo e linea sotto */

    margin-top: 20px;     /* Spazio sopra la linea superiore */
    margin-bottom: 10px;  /* Spazio sotto la linea inferiore */
}

.facts-container > h3:first-of-type {
    margin-top: 10px; 
}

.facts-container > hr {
    border: none; /* Rimuovi bordo di default */
    display: none; /* Nasconde eventuali <hr> dato che le linee sono gestite dagli h3 */
}

/* Opzionale: Assicura che gli item interni non abbiano sfondi strani */
.fact-item { /* Assumendo che gli item abbiano questa classe, altrimenti adattare */
    background-color: transparent !important; /* AGGIUNTO !important */
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 5px; /* Aggiunto padding */
    border-bottom: 1px dotted rgba(168, 255, 96, 0.3); /* Separatore leggero */
}
.fact-item:last-of-type { /* Rimuovi bordo dall'ultimo item di ogni sezione */
     border-bottom: none;
}

/* Stili scrollbar Webkit per .facts-container */
.facts-container::-webkit-scrollbar {
    width: 8px;
}

.facts-container::-webkit-scrollbar-track {
    background: #222; /* Track DARK GRAY (#222) - RIMOSSO !important */
    border-radius: 4px;
}

.facts-container::-webkit-scrollbar-thumb {
    background-color: #a8ff60; /* Thumb LIME */
    border-radius: 4px;
    border: 2px solid #222; /* Bordo DARK GRAY (#222) */
}

#loading-image {
    width: 100px; /* O la dimensione che hai impostato */
    height: 100px; /* O la dimensione che hai impostato */
    margin-bottom: 20px;
    image-rendering: pixelated;
    animation: spin 2s linear infinite; /* AGGIUNTA ANIMAZIONE */
}

/* AGGIUNTA KEYFRAMES PER L'ANIMAZIONE */
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

#loadingProgressContainer {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    max-width: 400px;
    background-color: rgba(0, 0, 0, 0.8);
    border: 4px solid #a8ff60;
    padding: 20px;
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    box-shadow: 0 0 15px #a8ff60, 0 0 30px #a8ff60;
    opacity: 0.9;
}

#loadingProgressContainer h2 {
    font-size: 18px;
    margin-bottom: 10px;
    color: #a8ff60;
    text-align: center;
}

#loadingProgressContainer p {
    font-size: 14px;
    margin: 0;
    color: #ffffff;
    text-align: center;
}

#progressBar {
    width: 100%;
    height: 10px;
    background-color: #333;
    border-radius: 5px;
    overflow: hidden;
    margin-top: 10px;
    position: relative;
    width: 100%;
}

#progressBar div {
    height: 100%;
    background-color: #a8ff60;
    transition: width 0.4s ease;
    border-radius: 5px;
    position: absolute;
    left: 0;
    top: 0;
}

/* Animazione per il caricamento */
@keyframes loadingAnim {
    0% { transform: scaleX(0); }
    100% { transform: scaleX(1); }
}

#progressBar div {
    animation: loadingAnim 2s ease-in-out forwards;
}

/* Aggiunto per il testo di stato caricamento */
#loadingStatus {
    font-size: 14px;
    color: #ffffff;
    margin-top: 5px;
    text-align: center;
    width: 100%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    white-space: nowrap; /* Impedisce il wrapping del testo */
    overflow: hidden; /* Nasconde il testo in eccesso */
    text-overflow: ellipsis; /* Aggiunge i puntini di sospensione se il testo è troppo lungo */
}

/* Aggiunto per centrare l'immagine di caricamento */
#loading-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    width: 100%;
    position: relative;
}

/* Stile per il messaggio personale sulla homepage */
#personalMessage {
    display: block; /* Visibile di default */
    text-align: center;
    padding: 15px 10px;
    color: #a8ff60; /* Colore verde "Game Boy" chiaro */
    font-family: 'Press Start 2P', cursive; /* Font principale del gioco */
    font-size: 10px; /* Leggermente più piccolo per discrezione */
    line-height: 1.6; /* Migliore leggibilità per testo multiriga */
    width: 90%; /* Larghezza relativa */
    max-width: 550px; /* Larghezza massima per allinearsi con il contenuto principale */
    margin-top: 20px; /* Margine superiore */
    margin-bottom: 15px; /* Margine inferiore, prima di #startScreen */
    /* margin-left: auto; e margin-right: auto; rimossi, la centratura è gestita da flex su body */
    border: 2px solid #a8ff60; /* Bordo sottile per integrarlo meglio */
    border-radius: 5px; /* Angoli arrotondati */
    background-color: rgba(15, 56, 15, 0.5); /* Sfondo leggermente trasparente del colore base */
}

/* 
  Nascondi il messaggio personale quando una delle altre schermate principali è attiva.
  Questo sfrutta il selettore :has() per verificare lo stile 'display' delle altre schermate.
  interstellarContainer è aggiunto dinamicamente da interstellar.js.
*/
body:has(#gameScreen[style*="display: flex"]) #personalMessage,
body:has(#gameScreen[style*="display: block"]) #personalMessage,
body:has(#factsScreen[style*="display: flex"]) #personalMessage,
body:has(#factsScreen[style*="display: block"]) #personalMessage,
body:has(#gameOver[style*="display: flex"]) #personalMessage,
body:has(#gameOver[style*="display: block"]) #personalMessage,
body:has(#interstellarContainer[style*="display: flex"]) #personalMessage,
body:has(#interstellarContainer[style*="display: block"]) #personalMessage {
    display: none !important; /* Nascondi il messaggio */
}

/* Stili per il contenitore principale dell'app */
#appContainer {
    width: 100%;
    max-width: 800px; /* Larghezza massima per il contenitore principale */
    margin: 0 auto; /* Centra orizzontalmente */
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative; /* Per posizionamento assoluto di elementi interni se necessario */
    box-sizing: border-box;
}

/* Header */
header {
    width: 100%;
    padding: 10px 0;
    background-color: rgba(15, 56, 15, 0.8); /* Verde traslucido */
    color: #a8ff60;
    text-align: center;
    position: relative; /* Per posizionamento assoluto di elementi interni se necessario */
    z-index: 100; /* Sopra altri contenuti ma sotto le modali */
    border-bottom: 2px solid #a8ff60; /* Bordo inferiore */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
}

header h1 {
    font-size: 24px;
    margin: 0;
    font-family: 'Press Start 2P', cursive;
}

/* Pulsante Menu (hamburger) */
.menu-toggle {
    display: none; /* Nascosto di default, mostrato su schermi piccoli */
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 40px;
    height: 40px;
    background-color: transparent;
    border: none;
    cursor: pointer;
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 200; /* Sopra il contenuto ma sotto le modali */
}

.menu-toggle div {
    width: 100%;
    height: 4px;
    background-color: #a8ff60;
    margin: 3px 0;
    transition: all 0.3s ease;
}

/* Mostra l'icona X quando attivo */
.menu-toggle.active div:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
}
.menu-toggle.active div:nth-child(2) {
    opacity: 0;
}
.menu-toggle.active div:nth-child(3) {
    transform: rotate(-45deg) translate(5px, -5px);
}

/* Menu laterale */
.side-menu {
    position: fixed;
    top: 0;
    right: -250px; /* Nascondi a destra */
    width: 250px;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    color: #a8ff60;
    padding: 20px;
    box-shadow: -2px 0 5px rgba(0, 0, 0, 0.7);
    transition: right 0.3s ease;
    z-index: 150; /* Sopra il contenuto ma sotto le modali */
}

/* Mostra il menu quando attivo */
.side-menu.active {
    right: 0;
}

.side-menu h2 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 20px;
    text-align: center;
    font-family: 'Press Start 2P', cursive;
    color: #a8ff60;
}

/* Link del menu */
.side-menu a {
    display: block;
    padding: 10px;
    margin: 10px 0;
    color: #a8ff60;
    text-decoration: none;
    border-radius: 5px;
    transition: background-color 0.3s, color 0.3s;
}

.side-menu a:hover {
    background-color: #a8ff60;
    color: #0f380f;
}

/* Contenitore principale del gioco */
.game-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    padding: 10px;
    box-sizing: border-box;
    position: relative;
}

/* Stili per il punteggio e il timer */
.score-timer-container {
    display: flex;
    justify-content: space-between;
    width: 100%;
    max-width: 800px;
    margin-bottom: 10px;
    padding: 0 10px;
    box-sizing: border-box;
}

.score-timer-container div {
    flex-basis: 48%; /* Circa metà dello spazio disponibile */
    text-align: center;
}

/* Stili per il grafico del punteggio */
#scoreChart {
    width: 100%;
    max-width: 800px;
    height: 300px; /* Altezza fissa per il grafico */
    margin: 20px 0;
}

/* Stili per la schermata di caricamento */
#loadingScreen {
    display: none; /* Nascosto di default */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    color: #a8ff60;
    text-align: center;
    padding: 20px;
    box-sizing: border-box;
    z-index: 10000; /* Sopra tutto */
}

/* Aggiunta di stili per il caricamento delle immagini */
#imageLoadingContainer {
    display: none; /* Nascosto di default */
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    max-width: 400px;
    background-color: rgba(0, 0, 0, 0.8);
    border: 4px solid #a8ff60;
    padding: 20px;
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    box-shadow: 0 0 15px #a8ff60, 0 0 30px #a8ff60;
    opacity: 0.9;
}

#imageLoadingContainer h2 {
    font-size: 18px;
    margin-bottom: 10px;
    color: #a8ff60;
    text-align: center;
}

#imageLoadingContainer p {
    font-size: 14px;
    margin: 0;
    color: #ffffff;
    text-align: center;
}

#imageProgressBar {
    width: 100%;
    height: 10px;
    background-color: #333;
    border-radius: 5px;
    overflow: hidden;
    margin-top: 10px;
    position: relative;
    width: 100%;
}

#imageProgressBar div {
    height: 100%;
    background-color: #a8ff60;
    transition: width 0.4s ease;
    border-radius: 5px;
    position: absolute;
    left: 0;
    top: 0;
}

/* Animazione per il caricamento delle immagini */
@keyframes imageLoadingAnim {
    0% { transform: scaleX(0); }
    100% { transform: scaleX(1); }
}

#imageProgressBar div {
    animation: imageLoadingAnim 2s ease-in-out forwards;
}

/* Aggiunto per il testo di stato caricamento immagini */
#imageLoadingStatus {
    font-size: 14px;
    color: #ffffff;
    margin-top: 5px;
    text-align: center;
    width: 100%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    white-space: nowrap; /* Impedisce il wrapping del testo */
    overflow: hidden; /* Nasconde il testo in eccesso */
    text-overflow: ellipsis; /* Aggiunge i puntini di sospensione se il testo è troppo lungo */
}

/* Aggiunto per centrare l'immagine di caricamento */
#imageLoadingContainer {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    width: 100%;
    position: relative;
}

/* Stili per la schermata di Game Over in Interstellar */
#interstellarGameOver {
    display: none; /* Nascosto di default */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    color: #a8ff60;
    text-align: center;
    padding: 20px;
    box-sizing: border-box;
    z-index: 10000; /* Sopra tutto */
}

/* Immagine di sfondo per Game Over in Interstellar */
#interstellarGameOverImage {
    display: block;
    margin: 0 auto 20px auto; /* Centra orizzontalmente e spazio sotto */
    max-width: 90%; /* Limita larghezza massima */
    height: auto; /* Mantiene proporzioni */
    object-fit: contain; /* Assicura che si adatti senza distorsioni */
}

/* Pulsante per riavviare il gioco in Game Over Interstellar */
#restartInterstellar {
    display: inline-block;
    margin-top: 10px;
    padding: 10px 20px;
    background-color: #a8ff60;
    color: #0f380f;
    text-decoration: none;
    border-radius: 5px;
    font-family: 'Press Start 2P', cursive;
    transition: background-color 0.3s, color 0.3s;
}

#restartInterstellar:hover {
    background-color: #0f380f;
    color: #a8ff60;
}

/* Stili specifici per la modalità Interstellar */

#interstellarCanvas {
    display: block; /* Evita spazi extra sotto il canvas */
    /* Mantieni gli stili inline o spostali qui se preferisci */
    border: 4px solid #FFFFFF; /* OK */
    border-radius: 5px; /* OK */
    background-color: black; /* OK */
    image-rendering: pixelated; /* OK: Mantiene stile pixel art */
    image-rendering: crisp-edges; /* OK: Alternativa */
    margin: 0 auto; /* OK: Centra il canvas se il contenitore è più largo di 800px */
    /* Assicurati che le dimensioni fisse siano impostate nell'HTML/JS (width="800" height="600") */
}

/* Stili specifici per l'immagine nella schermata Game Over di Interstellar */
#interstellarGameOverImage {
    /* Contenitore per l'immagine (es. explosion, lost, planet) */
    width: 100%; /* Occupa lo spazio disponibile nel suo contenitore (.game-over-content) */
    text-align: center; /* Centra l'immagine se è inline-block o block con margin auto */
    margin-bottom: 20px; /* Spazio sotto l'immagine, come definito in JS */
}

#interstellarGameOverImage img {
    /* Regola FONDAMENTALE per limitare la dimensione dell'immagine */
    display: block; /* Comportamento a blocco per usare margin auto */
    margin-left: auto;  /* Centra l'immagine orizzontalmente */
    margin-right: auto; /* Centra l'immagine orizzontalmente */
    max-width: 150px;  /* Imposta una larghezza massima (REGOLA QUESTO VALORE!) */
    max-height: 150px; /* Imposta un'altezza massima (REGOLA QUESTO VALORE!) */
    width: auto;       /* Mantiene le proporzioni originali */
    height: auto;      /* Mantiene le proporzioni originali */
    object-fit: contain; /* Assicura che l'immagine si adatti senza distorsioni */
    animation: subtleBobbing 1.8s ease-in-out infinite; /* AGGIUNTA ANIMAZIONE */
}

/* NUOVA REGOLA: Stile per il feedback testuale dei punti carburante in Interstellar */
.interstellar-fuel-points-text {
    font-family: 'Press Start 2P', monospace; /* Font principale del gioco */
    font-size: 16px; /* AUMENTATO - per feedback visivo immediato */
    color: #a8ff60; /* Colore standard per feedback positivi */
    /* font-weight: bold; RIMOSSO - i testi fluttuanti spesso non sono bold */
    position: absolute; 
    z-index: 1500;      
    pointer-events: none; 
    /* text-shadow: 1px 1px 1px rgba(0,0,0,0.7); RIMOSSO - per semplicità e coerenza se assente nell'altro testo fluttuante */
    /* Il tempo di permanenza e le animazioni (es. salire e svanire)
       sono gestiti da JavaScript. */
}

/* Stili per la modale Interstellar per matchare Eco Log */
#interstellar-window {
    background-color: #000000; /* Sfondo NERO pieno */
    border: 4px solid #a8ff60; /* Bordo verde esterno */
    padding: 20px; /* Aggiungi padding qui per spazio interno */
    box-shadow: 0 0 10px #a8ff60; /* Manteniamo glow */
}

/* Sovrascrivi gli stili del riquadro interno .retro-border SOLO dentro #interstellar-window */
#interstellar-window .retro-border {
    border: none; /* Rimuovi il bordo interno */
    padding: 0; /* Rimuovi il padding interno */
    background-color: transparent; /* Assicura sfondo trasparente */
    animation: none; /* Rimuovi animazione bordo se presente */
    box-shadow: none; /* Rimuovi ombre se presenti */
}

/* Assicura che il contenuto interno non abbia padding/background indesiderati */
#interstellar-window .retro-content {
     padding: 0; /* Rimuovi padding se gestito da #interstellar-window */
     background-color: transparent; /* Assicura sfondo trasparente */
}
